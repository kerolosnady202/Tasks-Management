"use strict";(self.webpackChunkuser=self.webpackChunkuser||[]).push([[270],{6270:(A,h,l)=>{l.r(h),l.d(h,{TasksModule:()=>y});var u=l(6814),r=l(86);class c extends Error{}c.prototype.name="InvalidTokenError";var t=l(4946),k=l(9862);let g=(()=>{class a{constructor(s){this._http=s}getUserTasks(s,e){let n=new k.LE;return Object.entries(e).forEach(([o,d])=>{n=n.append(o,d)}),this._http.get(`https://crud-27v6.onrender.com/tasks/user-tasks/${s}`,{params:n})}complete(s){return this._http.put("https://crud-27v6.onrender.com/tasks/complete",{id:s})}taskDetails(s){return this._http.get(`https://crud-27v6.onrender.com/tasks/task/${s}`)}static#t=this.\u0275fac=function(e){return new(e||a)(t.LFG(k.eN))};static#s=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var m=l(2425),p=l(6472);const v=function(a){return["/tasks/",a]};function D(a,i){if(1&a){const s=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"h3"),t._uU(3),t.qZA(),t._UZ(4,"img",5),t.TgZ(5,"p",6),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.qZA(),t.TgZ(9,"div",7)(10,"a",8),t._uU(11,"Details"),t.qZA(),t.TgZ(12,"a",9),t.NdJ("click",function(){const o=t.CHM(s).$implicit,d=t.oxw();return t.KtG(d.complete(null==o?null:o._id))}),t._uU(13,"complete"),t.qZA()()()()}if(2&a){const s=i.$implicit;t.xp6(3),t.Oqu(null==s?null:s.title),t.xp6(1),t.Q6J("src","https://crud-27v6.onrender.com/"+(null==s?null:s.image),t.LSH),t.xp6(2),t.hij("DeadLine Date :",null==s?null:s.deadline,""),t.xp6(2),t.Oqu(null==s?null:s.description),t.xp6(2),t.Q6J("routerLink",t.VKq(5,v,null==s?null:s._id))}}function Z(a,i){if(1&a){const s=t.EpF();t.TgZ(0,"div",10)(1,"pagination-controls",11),t.NdJ("pageChange",function(n){t.CHM(s);const o=t.oxw();return t.KtG(o.changePage(n))}),t.qZA()()}}const b=function(a,i){return{id:"tasks",itemsPerPage:4,currentPage:a,totalItems:i}},C=[{path:"",component:(()=>{class a{changePage(s){this.page=s,this.getAllTasks()}constructor(s,e){this._taskssSer=s,this._toastr=e,this.page=1,this.totalTask=0,this.selectstatus="In-Progress",this.check=!0}ngOnInit(){this.getUserData(),this.getAllTasks()}getUserData(){let s=JSON.stringify(localStorage.getItem("token"));this.userData=function _(a,i){if("string"!=typeof a)throw new c("Invalid token specified: must be a string");i||(i={});const s=!0===i.header?0:1,e=a.split(".")[s];if("string"!=typeof e)throw new c(`Invalid token specified: missing part #${s+1}`);let n;try{n=function T(a){let i=a.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function f(a){return decodeURIComponent(atob(a).replace(/(.)/g,(i,s)=>{let e=s.charCodeAt(0).toString(16).toUpperCase();return e.length<2&&(e="0"+e),"%"+e}))}(i)}catch{return atob(i)}}(e)}catch(o){throw new c(`Invalid token specified: invalid base64 for part #${s+1} (${o.message})`)}try{return JSON.parse(n)}catch(o){throw new c(`Invalid token specified: invalid json for part #${s+1} (${o.message})`)}}(s),console.log(this.userData.userId)}getAllTasks(){this._taskssSer.getUserTasks(this.userData.userId,{page:this.page,status:this.selectstatus}).subscribe({next:e=>{this.allUserTask=e.tasks,console.log(e),this.totalTask=e.tasks.length,this.check=!1},error:e=>{this.allUserTask=[],this.check=!0}})}complete(s){this._taskssSer.complete(s).subscribe({next:e=>{this._toastr.success(e.massage),console.log(e),this.getAllTasks()},error:e=>{console.log(e)}})}static#t=this.\u0275fac=function(e){return new(e||a)(t.Y36(g),t.Y36(m._W))};static#s=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-list-tasks"]],decls:4,vars:8,consts:[[1,"row"],["class","col-md-3 task py-3 mt-2 mb-4  ",4,"ngFor","ngForOf"],["class","d-flex justify-content-center mt-2   maincolor ",4,"ngIf"],[1,"col-md-3","task","py-3","mt-2","mb-4"],[1,"mx-1"],["alt","",3,"src"],[1,"deadline"],[1,"d-flex","justify-content-around","flex-wrap"],[1,"main-link",3,"routerLink"],[1,"second-link",3,"click"],[1,"d-flex","justify-content-center","mt-2","maincolor"],["id","tasks",3,"pageChange"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,D,14,7,"div",1),t.ALo(2,"paginate"),t.YNc(3,Z,2,0,"div",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",t.xi3(2,2,n.allUserTask,t.WLB(5,b,n.page,n.totalTask))),t.xp6(2),t.Q6J("ngIf",n.totalTask>0))},dependencies:[u.sg,u.O5,r.rH,p.LS,p._s]})}return a})()},{path:":id",component:(()=>{class a{constructor(s,e,n){this._activeRoute=s,this._taskSer=e,this._toastr=n}ngOnInit(){this._activeRoute.params.subscribe({next:s=>{this.id=s.id}}),this.taskDetails(this.id)}taskDetails(s){this._taskSer.taskDetails(s).subscribe({next:e=>{console.log(e.tasks),this.taskDetail=e.tasks}})}complete(){this._taskSer.complete(this.id).subscribe({next:s=>{this._toastr.success(s.massage),console.log(s),this.taskDetails(this.id)},error:s=>{console.log(s)}})}static#t=this.\u0275fac=function(e){return new(e||a)(t.Y36(r.gz),t.Y36(g),t.Y36(m._W))};static#s=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-taskdetails"]],decls:19,vars:6,consts:[[1,"row","m-3","task-details","d-flex","align-items-center","position-relative"],[1,"col-md-4"],["alt","",1,"w-100",3,"src"],[1,"col-md-8"],[1,"maincolor"],[1,"secondcolor"],[1,"d-flex","justify-content-around","flex-wrap"],[1,"second-link",3,"disabled","click"],[1,"btn","btn-success","postions"],["routerLink","/tasks"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"div",3)(4,"h3",4),t._uU(5),t.qZA(),t.TgZ(6,"p",5),t._uU(7),t.qZA(),t.TgZ(8,"p",5),t._uU(9),t.qZA(),t.TgZ(10,"p",4),t._uU(11),t.qZA(),t.TgZ(12,"div",6)(13,"button",7),t.NdJ("click",function(){return n.complete()}),t.TgZ(14,"span"),t._uU(15,"complete"),t.qZA()()(),t.TgZ(16,"button",8)(17,"a",9),t._uU(18,"Back To All Tasks"),t.qZA()()()()),2&e&&(t.xp6(2),t.Q6J("src","https://crud-27v6.onrender.com/"+(null==n.taskDetail?null:n.taskDetail.image),t.LSH),t.xp6(3),t.Oqu(null==n.taskDetail?null:n.taskDetail.title),t.xp6(2),t.hij("DeadLine Date : ",null==n.taskDetail?null:n.taskDetail.deadline,""),t.xp6(2),t.Oqu(null==n.taskDetail?null:n.taskDetail.description),t.xp6(2),t.hij("status : ",null==n.taskDetail?null:n.taskDetail.status,""),t.xp6(2),t.Q6J("disabled","Complete"==(null==n.taskDetail?null:n.taskDetail.status)))},dependencies:[r.rH]})}return a})()}];let U=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#s=this.\u0275mod=t.oAB({type:a});static#e=this.\u0275inj=t.cJS({imports:[r.Bz.forChild(C),r.Bz]})}return a})(),y=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#s=this.\u0275mod=t.oAB({type:a});static#e=this.\u0275inj=t.cJS({imports:[u.ez,U,p.JX]})}return a})()}}]);