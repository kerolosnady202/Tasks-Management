"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[51],{3051:($,p,i)=>{i.r(p),i.d(p,{UsersModule:()=>j});var f=i(8899),h=i(6814),_=i(1896),t=i(5879),C=i(6158),x=i(2425),g=i(4170),A=i(2032),r=i(5313),d=i(6472),m=i(6223);function T(e,s){1&e&&(t.TgZ(0,"th",19),t._uU(1," No. "),t.qZA())}function Z(e,s){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const n=s.index;t.xp6(1),t.hij(" ",n," ")}}function b(e,s){1&e&&(t.TgZ(0,"th",19),t._uU(1," username "),t.qZA())}function U(e,s){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const n=s.$implicit;t.xp6(1),t.hij(" ",n.username," ")}}function v(e,s){1&e&&(t.TgZ(0,"th",19),t._uU(1," email "),t.qZA())}function y(e,s){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const n=s.$implicit;t.xp6(1),t.hij(" ",n.email," ")}}function M(e,s){1&e&&(t.TgZ(0,"th",19),t._uU(1," assignedTasks "),t.qZA())}function N(e,s){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const n=s.$implicit;t.xp6(1),t.hij(" ",n.assignedTasks," ")}}function k(e,s){1&e&&(t.TgZ(0,"th",19),t._uU(1,"status"),t.qZA())}function P(e,s){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const n=s.$implicit;t.xp6(1),t.hij(" ",n.status," ")}}function O(e,s){1&e&&(t.TgZ(0,"th",19),t._uU(1,"action"),t.qZA())}function Y(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(n);const o=t.oxw(),l=o.$implicit,c=o.index,u=t.oxw();return t.KtG(u.chagestatus(l._id,l.status,c))}),t._uU(1,"Active"),t.qZA()}}function D(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(n);const o=t.oxw(),l=o.$implicit,c=o.index,u=t.oxw();return t.KtG(u.chagestatus(l._id,l.status,c))}),t._uU(1,"In-Active"),t.qZA()}}function w(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"td",20)(1,"div",21)(2,"button",22),t.NdJ("click",function(){const o=t.CHM(n),l=o.$implicit,c=o.index,u=t.oxw();return t.KtG(u.deleteUser(l._id,c))}),t._uU(3,"Delete"),t.qZA(),t.YNc(4,Y,2,0,"button",23),t.YNc(5,D,2,0,"button",24),t.qZA()()}if(2&e){const n=s.$implicit;t.xp6(4),t.Q6J("ngIf","Active"!==n.status),t.xp6(1),t.Q6J("ngIf","Active"==n.status)}}function J(e,s){1&e&&t._UZ(0,"tr",27)}function B(e,s){1&e&&t._UZ(0,"tr",28)}const Q=function(e,s){return{id:"user",itemsPerPage:7,currentPage:e,totalItems:s}},S=[{path:"",component:(()=>{class e{changePage(n){this.p=n,this.model.page=n,this.getAllUser()}constructor(n,a){this._user=n,this._toastr=a,this.displayedColumns=["position","username","email","assignedTasks","status","action"],this.dataSource=[],this.p=1,this.total=0,this.model={page:this.p,limit:7,name:""},this.getDataFromSub()}ngOnInit(){this.getAllUser()}seach(n){this.model.name=n.value,clearTimeout(this.setId),this.setId=setTimeout(()=>{this.getAllUser()},1e3)}getAllUser(){this._user.getAllUsers(this.model)}getDataFromSub(){this._user.userData.subscribe({next:n=>{this.dataSource=n.data,this.total=n.total}})}deleteUser(n,a){this.dataSource[a].assignedTasks>0?this._toastr.error("you can not delete this user until complete his tasks"):this._user.deleteUser(n).subscribe({next:o=>{this._toastr.success(o.massage),this.getAllUser()}})}chagestatus(n,a,o){this.dataSource[o].assignedTasks>0?this._toastr.error("you can not change status of  this user until complete his tasks"):this._user.changestatus({id:n,status:a}).subscribe({next:c=>{this._toastr.success(c.massage),this.getAllUser()}})}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(C.R),t.Y36(x._W))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-allusers"]],decls:32,vars:9,consts:[[1,"text-white","mt-3"],[1,"row","mt-2"],[1,"col-md-4"],["appearance","outline",1,"w-100"],["matInput","","placeholder","search by username",3,"keyup"],[1,"table-responsive"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","username"],["matColumnDef","email"],["matColumnDef","assignedTasks"],["matColumnDef","status"],["matColumnDef","action"],["mat-header-row","","class","text-white text-center",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"text-center","mt-3"],["id","user",3,"pageChange"],["mat-header-cell",""],["mat-cell",""],[1,""],[1,"btn","btn-danger","px-3","mx-2",3,"click"],["class","btn btn-success",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-primary",3,"click"],["mat-header-row","",1,"text-white","text-center"],["mat-row",""]],template:function(a,o){1&a&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"search "),t.qZA(),t.TgZ(6,"input",4),t.NdJ("keyup",function(c){return o.seach(c.target)}),t.qZA()()()()(),t.TgZ(7,"div",5)(8,"table",6),t.ynx(9,7),t.YNc(10,T,2,0,"th",8),t.YNc(11,Z,2,1,"td",9),t.BQk(),t.ynx(12,10),t.YNc(13,b,2,0,"th",8),t.YNc(14,U,2,1,"td",9),t.BQk(),t.ynx(15,11),t.YNc(16,v,2,0,"th",8),t.YNc(17,y,2,1,"td",9),t.BQk(),t.ynx(18,12),t.YNc(19,M,2,0,"th",8),t.YNc(20,N,2,1,"td",9),t.BQk(),t.ynx(21,13),t.YNc(22,k,2,0,"th",8),t.YNc(23,P,2,1,"td",9),t.BQk(),t.ynx(24,14),t.YNc(25,O,2,0,"th",8),t.YNc(26,w,6,2,"td",9),t.BQk(),t.YNc(27,J,1,0,"tr",15),t.YNc(28,B,1,0,"tr",16),t.ALo(29,"paginate"),t.qZA(),t.TgZ(30,"div",17)(31,"pagination-controls",18),t.NdJ("pageChange",function(c){return o.changePage(c)}),t.qZA()()()),2&a&&(t.xp6(8),t.Q6J("dataSource",o.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.xi3(29,3,o.displayedColumns,t.WLB(6,Q,o.p,o.total))))},dependencies:[h.O5,g.KE,g.hX,A.Nt,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,d.LS,m._Y,m.JL,m.F,d._s],styles:["table[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px}[_nghost-%COMP%]     table thead{background-color:#f1600c!important}[_nghost-%COMP%]     table thead .mat-header-cell{color:#fff}.mat-mdc-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .mat-mdc-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%], .mat-mdc-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .mat-mdc-cell[_ngcontent-%COMP%], .mat-mdc-footer-cell[_ngcontent-%COMP%], .mat-mdc-header-row[_ngcontent-%COMP%], .mat-mdc-row[_ngcontent-%COMP%], .mat-mdc-footer-row[_ngcontent-%COMP%], .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{text-align:center}  .ngx-pagination{display:flex;justify-content:center;align-items:center}  .ngx-pagination .current{background:#f1600c!important;border-radius:50%}  .ngx-pagination a,   .ngx-pagination button{color:#f1600c!important}  .ngx-pagination button{font-size:16px}"]})}return e})()}];let F=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[_.Bz.forChild(S),_.Bz]})}return e})();var I=i(9862);let j=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[h.ez,F,f.q,I.JF,d.JX,m.u5,m.UX]})}return e})()}}]);